<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="953px" preserveAspectRatio="none" style="width:1101px;height:953px;background:#FFFFFF;" version="1.1" viewBox="0 0 1101 953" width="1101px" zoomAndPan="magnify"><defs><filter height="300%" id="fmrlmtx49xjcb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="154" x="466.25" y="17.4023">EJV Payment Flow</text><ellipse cx="510.5" cy="37.1992" fill="#000000" filter="url(#fmrlmtx49xjcb)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="92" x="464.5" y="87.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="474.5" y="108.8008">Payment Job</text><path d="M576.5,91.6992 L576.5,100.1992 L556.7,104.1992 L576.5,108.1992 L576.5,117.0098 A0,0 0 0 0 576.5,117.0098 L1092.5,117.0098 A0,0 0 0 0 1092.5,117.0098 L1092.5,101.6992 L1082.5,91.6992 L576.5,91.6992 A0,0 0 0 0 576.5,91.6992 " fill="#FBFB77" filter="url(#fmrlmtx49xjcb)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1082.5,91.6992 L1082.5,101.6992 L1092.5,101.6992 L1082.5,91.6992 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="495" x="582.5" y="109.2676">Payment Job includes the cron for settling EJV Payments and EJV dibursements.</text><rect fill="#000000" filter="url(#fmrlmtx49xjcb)" height="8" style="stroke:none;stroke-width:1.0;" width="80" x="470.5" y="174.1992"/><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="192" x="255.5" y="161.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="172" x="265.5" y="182.8008">Government Account Payment</text><polygon fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" points="346.5,235.1992,358.5,247.1992,346.5,259.1992,334.5,247.1992,346.5,235.1992" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="196" x="237.5" y="299.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="176" x="247.5" y="320.8008">Get all accounts for batch type</text><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="193" x="217" y="373.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="173" x="227" y="394.8008">Create JV Header Per Account</text><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="62.3984" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="315" x="113" y="447.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="291" x="123" y="468.8008">Create lines for debits and credits for each invoice</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="0" x="272.5" y="482.9336"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="295" x="123" y="497.0664">(status : APPROVED, no ACTIVE invoice_references)</text><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="62.3984" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="449" x="7" y="549.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="425" x="17" y="570.8008">Create reversal lines for debits and credits for any invoice to be refunded</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="0" x="233.5" y="584.9336"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="411" x="26" y="599.0664">(status : REFUND_REQUESTED and has COMPLETED invoice_references)</text><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="110" x="402.5" y="651.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="412.5" y="672.8008">Upload to Minio</text><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="168" x="373.5" y="725.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="148" x="383.5" y="746.8008">Upload INBOX file to sFTP</text><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="157" x="379" y="799.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="137" x="389" y="820.8008">Upload TRG file to sFTP</text><rect fill="#000000" filter="url(#fmrlmtx49xjcb)" height="8" style="stroke:none;stroke-width:1.0;" width="80" x="417.5" y="873.1992"/><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="140" x="571.5" y="161.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="581.5" y="182.8008">Partner Dibursement</text><polygon fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" points="646.5,235.1992,658.5,247.1992,646.5,259.1992,634.5,247.1992,646.5,235.1992" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="194" x="550.5" y="299.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174" x="560.5" y="320.8008">Get all Partner to settle by EJV</text><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="34.1328" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="190" x="562.5" y="373.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="170" x="572.5" y="394.8008">Create JV Header Per Partner</text><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="62.3984" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="391" x="468" y="447.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="367" x="478" y="468.8008">Create lines for debits and credits for each invoice statutory fee</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="0" x="665.5" y="482.9336"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="288" x="519.5" y="497.0664">(Invoice status : PAID, disbursement_status is null)</text><rect fill="#FEFECE" filter="url(#fmrlmtx49xjcb)" height="62.3984" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="415" x="476" y="549.1992"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="391" x="486" y="570.8008">Create reversal lines for debits and credits for any refunded invoice</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="0" x="685.5" y="584.9336"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="370" x="498.5" y="599.0664">(Invoice status REFUNDED and disbursement status COMPLETED</text><ellipse cx="457.5" cy="931.1992" filter="url(#fmrlmtx49xjcb)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;fill:none;"/><ellipse cx="458" cy="931.6992" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><!--MD5=[1836030c5ab7ee3ca9d394822fb056ac]
link start to Payment Job--><path d="M510.5,47.2392 C510.5,56.1292 510.5,70.0392 510.5,81.7692 " fill="none" id="start-to-Payment Job" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="510.5,86.9792,514.5,77.9792,510.5,81.9792,506.5,77.9792,510.5,86.9792" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[92903e25a48cc2ed89c16d5f90934695]
link Payment Job to EJV_PAYMENT_START--><path d="M504.1,121.5392 C502.25,136.3692 502.73,157.6292 505.55,169.1092 " fill="none" id="Payment Job-to-EJV_PAYMENT_START" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="507.12,173.8792,508.1218,164.0814,505.5646,169.1273,500.5187,166.5701,507.12,173.8792" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[92903e25a48cc2ed89c16d5f90934695]
link Payment Job to EJV_PAYMENT_START--><path d="M516.9,121.5392 C518.75,136.3692 518.27,157.6292 515.45,169.1092 " fill="none" id="Payment Job-to-EJV_PAYMENT_START-1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="513.88,173.8792,520.4813,166.5701,515.4354,169.1273,512.8782,164.0814,513.88,173.8792" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[da97450d9a22fdef3a83128f395a0411]
reverse link Government Account Payment to EJV_PAYMENT_START--><path d="M453.05,178.1992 C458.81,178.1992 464.56,178.1992 470.31,178.1992 " fill="none" id="Government Account Payment-backto-EJV_PAYMENT_START" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="447.77,178.1992,456.77,182.1992,452.77,178.1992,456.77,174.1992,447.77,178.1992" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[59d04f5b761edc905fdb7912229a49a8]
link Government Account Payment to #71--><path d="M350.29,195.4192 C349.49,206.0992 348.45,220.0192 347.67,230.5792 " fill="none" id="Government Account Payment-to-#71" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="347.28,235.7592,351.9376,227.0813,347.6515,230.773,343.9597,226.4869,347.28,235.7592" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="204" x="366.2301" y="231.2665">Iterate for each batch type (GI and GA)</text><!--MD5=[7e0e37788544ea5042fbc399feb74e62]
link #71 to Get all accounts for batch type--><path d="M344.92,257.7992 C343.37,267.2292 340.96,281.9492 338.96,294.1092 " fill="none" id="#71-to-Get all accounts for batch type" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="338.13,299.1492,343.5436,290.9216,338.945,294.2161,335.6506,289.6176,338.13,299.1492" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[d1a0ed1a1107460cb977184aa6600830]
link Get all accounts for batch type to Create JV Header Per Account--><path d="M330.51,333.5392 C327.39,343.7592 323.33,357.0192 319.97,368.0392 " fill="none" id="Get all accounts for batch type-to-Create JV Header Per Account" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="318.47,372.9292,324.9383,365.5022,319.9394,368.15,317.2916,363.1511,318.47,372.9292" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[dbf4a75604f1558451ffb9100bf8a3b6]
link Create JV Header Per Account to Create lines for debits and credits for each invoice \n\n(status : APPROVED, no ACTIVE invoice_references)--><path d="M305.41,407.3792 C300.47,417.2592 293.96,430.2792 287.9,442.3992 " fill="none" id="Create JV Header Per Account-to-Create lines for debits and credits for each invoice \n\n(status : APPROVED, no ACTIVE invoice_references)" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="285.51,447.1692,293.0966,440.8889,287.7347,442.6914,285.9321,437.3294,285.51,447.1692" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b9de312acb3538ba5d9236f90be90433]
link Create lines for debits and credits for each invoice \n\n(status : APPROVED, no ACTIVE invoice_references) to Create reversal lines for debits and credits for any invoice to be refunded \n\n(status : REFUND_REQUESTED and has COMPLETED invoice_references)--><path d="M258.8,509.1992 C254.52,520.1792 249.64,532.6892 245.2,544.0692 " fill="none" id="Create lines for debits and credits for each invoice \n\n(status : APPROVED, no ACTIVE invoice_references)-to-Create reversal lines for debits and credits for any invoice to be refunded \n\n(status : REFUND_REQUESTED and has COMPLETED invoice_references)" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="243.33,548.8692,250.317,541.9279,245.1402,544.2084,242.8596,539.0316,243.33,548.8692" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a25af5cb7c6737216fbb7a933f55ee2d]
link Create reversal lines for debits and credits for any invoice to be refunded \n\n(status : REFUND_REQUESTED and has COMPLETED invoice_references) to Upload to Minio--><path d="M310.54,611.2792 C343.87,623.9592 381.55,638.2992 410.41,649.2792 " fill="none" id="Create reversal lines for debits and credits for any invoice to be refunded \n\n(status : REFUND_REQUESTED and has COMPLETED invoice_references)-to-Upload to Minio" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="415.33,651.1492,408.3515,644.1993,410.6596,649.3639,405.495,651.672,415.33,651.1492" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e6074553f41f2cdf11d042f14d04a548]
link Upload to Minio to Upload INBOX file to sFTP--><path d="M451.1,685.5392 C449.84,695.6592 449.66,708.7792 450.57,719.7392 " fill="none" id="Upload to Minio-to-Upload INBOX file to sFTP" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="451.11,724.9292,454.1654,715.5663,450.597,719.9556,446.2076,716.3872,451.11,724.9292" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e6074553f41f2cdf11d042f14d04a548]
link Upload to Minio to Upload INBOX file to sFTP--><path d="M463.9,685.5392 C465.16,695.6592 465.34,708.7792 464.43,719.7392 " fill="none" id="Upload to Minio-to-Upload INBOX file to sFTP-1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="463.89,724.9292,468.7924,716.3872,464.403,719.9556,460.8346,715.5663,463.89,724.9292" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b9be11ea16d553159f4de107c467fdc8]
link Upload INBOX file to sFTP to Upload TRG file to sFTP--><path d="M451.1,759.5392 C449.84,769.6592 449.66,782.7792 450.57,793.7392 " fill="none" id="Upload INBOX file to sFTP-to-Upload TRG file to sFTP" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="451.11,798.9292,454.1654,789.5663,450.597,793.9556,446.2076,790.3872,451.11,798.9292" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b9be11ea16d553159f4de107c467fdc8]
link Upload INBOX file to sFTP to Upload TRG file to sFTP--><path d="M463.9,759.5392 C465.16,769.6592 465.34,782.7792 464.43,793.7392 " fill="none" id="Upload INBOX file to sFTP-to-Upload TRG file to sFTP-1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="463.89,798.9292,468.7924,790.3872,464.403,793.9556,460.8346,789.5663,463.89,798.9292" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f7f486cdf5dc76f07833245c5bb53b4f]
link Upload TRG file to sFTP to EJV_PAYMENT_END--><path d="M450.73,833.3192 C449.41,844.6192 449.88,859.2492 452.16,868.1692 " fill="none" id="Upload TRG file to sFTP-to-EJV_PAYMENT_END" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="453.81,872.8992,454.6083,863.0828,452.1563,868.1806,447.0585,865.7286,453.81,872.8992" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f7f486cdf5dc76f07833245c5bb53b4f]
link Upload TRG file to sFTP to EJV_PAYMENT_END--><path d="M464.27,833.3192 C465.59,844.6192 465.12,859.2492 462.84,868.1692 " fill="none" id="Upload TRG file to sFTP-to-EJV_PAYMENT_END-1" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="461.19,872.8992,467.9415,865.7286,462.8437,868.1806,460.3917,863.0828,461.19,872.8992" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f5aa04d3872a31a2cdf371a3a53c74d4]
link EJV_PAYMENT_START to Partner Dibursement--><path d="M550.67,178.1992 C555.81,178.1992 560.96,178.1992 566.1,178.1992 " fill="none" id="EJV_PAYMENT_START-to-Partner Dibursement" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="571.25,178.1992,562.25,174.1992,566.25,178.1992,562.25,182.1992,571.25,178.1992" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[21133ef6088f186a3b2b3a31f0174194]
link Partner Dibursement to #93--><path d="M642.71,195.4192 C643.51,206.0992 644.55,220.0192 645.33,230.5792 " fill="none" id="Partner Dibursement-to-#93" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="645.72,235.7592,649.0403,226.4869,645.3485,230.773,641.0624,227.0813,645.72,235.7592" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="204" x="666.5966" y="230.8955">Iterate for each batch type (GI and GA)</text><!--MD5=[4a79a81c06b88bb09491d147748c17ce]
link #93 to Get all Partner to settle by EJV--><path d="M646.67,259.2592 C646.81,268.6792 647.01,282.4592 647.18,293.9892 " fill="none" id="#93-to-Get all Partner to settle by EJV" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="647.26,299.0992,651.1307,290.0428,647.1884,294.0997,643.1315,290.1574,647.26,299.0992" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[33622268b5cb587a567ea2a17e6314ff]
link Get all Partner to settle by EJV to Create JV Header Per Partner--><path d="M649.77,333.5392 C651.18,343.6592 653,356.7792 654.52,367.7392 " fill="none" id="Get all Partner to settle by EJV-to-Create JV Header Per Partner" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="655.24,372.9292,657.9423,363.4583,654.5409,367.9783,650.0209,364.5769,655.24,372.9292" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[968684cf26c7e8294593d141aebf108b]
link Create JV Header Per Partner to Create lines for debits and credits for each invoice statutory fee \n\n(Invoice status : PAID, disbursement_status is null)--><path d="M658.63,407.3792 C659.31,417.1692 660.21,430.0492 661.05,442.0792 " fill="none" id="Create JV Header Per Partner-to-Create lines for debits and credits for each invoice statutory fee \n\n(Invoice status : PAID, disbursement_status is null)" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="661.41,447.1692,664.7567,437.9064,661.0527,442.182,656.7772,438.478,661.41,447.1692" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[0e3ef5d104797cbcea6d2886ce889b0b]
link Create lines for debits and credits for each invoice statutory fee \n\n(Invoice status : PAID, disbursement_status is null) to Create reversal lines for debits and credits for any refunded invoice \n\n(Invoice status REFUNDED and disbursement status COMPLETED--><path d="M669.5,509.1992 C671.68,520.0792 674.15,532.4692 676.41,543.7692 " fill="none" id="Create lines for debits and credits for each invoice statutory fee \n\n(Invoice status : PAID, disbursement_status is null)-to-Create reversal lines for debits and credits for any refunded invoice \n\n(Invoice status REFUNDED and disbursement status COMPLETED" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="677.43,548.8692,679.6034,539.2632,676.4577,543.9647,671.7562,540.8189,677.43,548.8692" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[ddcb966fc7352b2f36006c9edc217336]
link Create reversal lines for debits and credits for any refunded invoice \n\n(Invoice status REFUNDED and disbursement status COMPLETED to Upload to Minio--><path d="M604.46,611.2792 C571.13,623.9592 533.45,638.2992 504.59,649.2792 " fill="none" id="Create reversal lines for debits and credits for any refunded invoice \n\n(Invoice status REFUNDED and disbursement status COMPLETED-to-Upload to Minio" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="499.67,651.1492,509.505,651.672,504.3404,649.3639,506.6485,644.1993,499.67,651.1492" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[49f7cce331efde61011a12987a5a99a3]
link EJV_PAYMENT_END to end--><path d="M457.5,881.2992 C457.5,887.9692 457.5,904.0692 457.5,915.9792 " fill="none" id="EJV_PAYMENT_END-to-end" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="457.5,921.1092,461.5,912.1092,457.5,916.1092,453.5,912.1092,457.5,921.1092" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[4c84f6c2a91f4cb9e27e58d5ac62bb08]
@startuml
    title EJV Payment Flow

    (*) - -> "Payment Job"
    note right
    Payment Job includes the cron for settling EJV Payments and EJV dibursements.
    end note

    - -> ===EJV_PAYMENT_START=== 
    -left-> "Government Account Payment"
    if "Iterate for each batch type (GI and GA)" then
        -down-> "Get all accounts for batch type"
        - ->"Create JV Header Per Account"

        - ->"Create lines for debits and credits for each invoice \n
        (status : APPROVED, no ACTIVE invoice_references)"

        - ->"Create reversal lines for debits and credits for any invoice to be refunded \n
        (status : REFUND_REQUESTED and has COMPLETED invoice_references)"

    endif

    - ->"Upload to Minio"
    - ->"Upload INBOX file to sFTP"
    - ->"Upload TRG file to sFTP"

    -down-> ===EJV_PAYMENT_END===

    "Payment Job" - -> ===EJV_PAYMENT_START=== 
        -right-> "Partner Dibursement"
        if "Iterate for each batch type (GI and GA)" then
            -down-> "Get all Partner to settle by EJV"
            - ->"Create JV Header Per Partner"
            - ->"Create lines for debits and credits for each invoice statutory fee \n
                (Invoice status : PAID, disbursement_status is null)"
            - ->"Create reversal lines for debits and credits for any refunded invoice \n
                (Invoice status REFUNDED and disbursement status COMPLETED"

        endif
        - ->"Upload to Minio"
        - ->"Upload INBOX file to sFTP"
        - ->"Upload TRG file to sFTP"

    -down-> ===EJV_PAYMENT_END===
    - -> (*)

@enduml

PlantUML version 1.2021.14(Fri Nov 12 08:46:50 PST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CA
--></g></svg>