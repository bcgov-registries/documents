<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="409px" preserveAspectRatio="none" style="width:691px;height:409px;background:#FFFFFF;" version="1.1" viewBox="0 0 691 409" width="691px" zoomAndPan="magnify"><defs><filter height="300%" id="f34swdq2vtdf" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f34swdq2vtdf)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="543" x="10" y="143.1094"/><rect fill="#FFFFFF" filter="url(#f34swdq2vtdf)" height="120.1973" style="stroke:#000000;stroke-width:2.0;" width="667" x="10" y="203.7305"/><rect fill="#FFFFFF" height="73.5762" style="stroke:none;stroke-width:1.0;" width="667" x="10" y="250.3516"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="104" x2="104" y1="67.4883" y2="340.9277"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="226" x2="226" y1="67.4883" y2="340.9277"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="516" x2="516" y1="67.4883" y2="340.9277"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="610" x2="610" y1="67.4883" y2="340.9277"/><path d="M25,41 L183,41 C188,41 188,54.2441 188,54.2441 C188,54.2441 188,67.4883 183,67.4883 L25,67.4883 C20,67.4883 20,54.2441 20,54.2441 C20,54.2441 20,41 25,41 " fill="#FEFECE" filter="url(#f34swdq2vtdf)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M183,41 C178,41 178,54.2441 178,54.2441 C178,67.4883 183,67.4883 183,67.4883 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="25" y="59.5352">Reconciliation_Queue</text><path d="M25,339.9277 L183,339.9277 C188,339.9277 188,353.1719 188,353.1719 C188,353.1719 188,366.416 183,366.416 L25,366.416 C20,366.416 20,353.1719 20,353.1719 C20,353.1719 20,339.9277 25,339.9277 " fill="#FEFECE" filter="url(#f34swdq2vtdf)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M183,339.9277 C178,339.9277 178,353.1719 178,353.1719 C178,366.416 183,366.416 183,366.416 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="25" y="358.4629">Reconciliation_Queue</text><rect fill="#FEFECE" filter="url(#f34swdq2vtdf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="52" x="198" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="205" y="52.5352">Minio</text><rect fill="#FEFECE" filter="url(#f34swdq2vtdf)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="52" x="198" y="339.9277"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="205" y="360.4629">Minio</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="489" y="64.5352">Pay_DB</text><path d="M498,15 C498,5 516,5 516,5 C516,5 534,5 534,15 L534,41 C534,51 516,51 516,51 C516,51 498,51 498,41 L498,15 " fill="#FEFECE" filter="url(#f34swdq2vtdf)" style="stroke:#000000;stroke-width:1.5;"/><path d="M498,15 C498,25 516,25 516,25 C516,25 534,25 534,15 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="489" y="353.4629">Pay_DB</text><path d="M498,366.416 C498,356.416 516,356.416 516,356.416 C516,356.416 534,356.416 534,366.416 L534,392.416 C534,402.416 516,402.416 516,402.416 C516,402.416 498,402.416 498,392.416 L498,366.416 " fill="#FEFECE" filter="url(#f34swdq2vtdf)" style="stroke:#000000;stroke-width:1.5;"/><path d="M498,366.416 C498,376.416 516,376.416 516,376.416 C516,376.416 534,376.416 534,366.416 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><path d="M558,41 L662,41 C667,41 667,54.2441 667,54.2441 C667,54.2441 667,67.4883 662,67.4883 L558,67.4883 C553,67.4883 553,54.2441 553,54.2441 C553,54.2441 553,41 558,41 " fill="#FEFECE" filter="url(#f34swdq2vtdf)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M662,41 C657,41 657,54.2441 657,54.2441 C657,67.4883 662,67.4883 662,67.4883 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="558" y="59.5352">Mailer_Queue</text><path d="M558,339.9277 L662,339.9277 C667,339.9277 667,353.1719 667,353.1719 C667,353.1719 667,366.416 662,366.416 L558,366.416 C553,366.416 553,353.1719 553,353.1719 C553,353.1719 553,339.9277 558,339.9277 " fill="#FEFECE" filter="url(#f34swdq2vtdf)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M662,339.9277 C657,339.9277 657,353.1719 657,353.1719 C657,366.416 662,366.416 662,366.416 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="558" y="358.4629">Mailer_Queue</text><polygon fill="#A80036" points="214,94.7988,224,98.7988,214,102.7988,218,98.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="220" y1="98.7988" y2="98.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="111" y="94.0566">Get the file</text><polygon fill="#A80036" points="115,124.1094,105,128.1094,115,132.1094,111,128.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="109" x2="225" y1="128.1094" y2="128.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="121" y="123.3672">File content</text><path d="M10,143.1094 L72,143.1094 L72,150.1094 L62,160.1094 L10,160.1094 L10,143.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="543" x="10" y="143.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="156.6777">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="87" y="155.7441">[Acknowledgement]</text><polygon fill="#A80036" points="504,177.7305,514,181.7305,504,185.7305,508,181.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="510" y1="181.7305" y2="181.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="388" x="111" y="176.9883">Update disbursement_status_code status to ACKNOWLEDGED</text><path d="M10,203.7305 L72,203.7305 L72,210.7305 L62,220.7305 L10,220.7305 L10,203.7305 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="120.1973" style="stroke:#000000;stroke-width:2.0;" width="667" x="10" y="203.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="217.2988">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="204" x="87" y="216.3652">[Feedback Successful Disbursement]</text><polygon fill="#A80036" points="504,238.3516,514,242.3516,504,246.3516,508,242.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="510" y1="242.3516" y2="242.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="357" x="111" y="237.6094">Update disbursement_status_code status to COMPLETED</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="677" y1="251.3516" y2="251.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="178" x="15" y="261.9863">[Feedback Failed Disbursement]</text><polygon fill="#A80036" points="504,282.6172,514,286.6172,504,290.6172,508,286.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="510" y1="286.6172" y2="286.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="111" y="281.875">Update records</text><polygon fill="#A80036" points="598,311.9277,608,315.9277,598,319.9277,602,315.9277" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="604" y1="315.9277" y2="315.9277"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="111" y="311.1855">Publish staff email for failed EJV</text><!--MD5=[7c1d17f6a751ba55b721cedc0418acc9]
@startuml ejv/partner_reconciliation
queue       Reconciliation_Queue
participant Minio
database    Pay_DB
queue       Mailer_Queue


Reconciliation_Queue -> Minio: Get the file
Minio -> Reconciliation_Queue: File content
alt Acknowledgement
    Reconciliation_Queue -> Pay_DB : Update disbursement_status_code status to ACKNOWLEDGED
end

alt Feedback Successful Disbursement
    Reconciliation_Queue -> Pay_DB : Update disbursement_status_code status to COMPLETED
else Feedback Failed Disbursement
    Reconciliation_Queue -> Pay_DB : Update records
    Reconciliation_Queue -> Mailer_Queue : Publish staff email for failed EJV

end

@enduml

PlantUML version 1.2021.14(Fri Nov 12 08:46:50 PST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CA
--></g></svg>