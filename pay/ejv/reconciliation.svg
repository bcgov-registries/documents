<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="409px" preserveAspectRatio="none" style="width:567px;height:409px;background:#FFFFFF;" version="1.1" viewBox="0 0 567 409" width="567px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pgs5tge65583" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1pgs5tge65583)" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="419" x="10" y="143.1094"/><rect fill="#FFFFFF" filter="url(#f1pgs5tge65583)" height="120.1973" style="stroke:#000000;stroke-width:2.0;" width="543" x="10" y="203.7305"/><rect fill="#FFFFFF" height="73.5762" style="stroke:none;stroke-width:1.0;" width="543" x="10" y="250.3516"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="104" x2="104" y1="67.4883" y2="340.9277"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="226" x2="226" y1="67.4883" y2="340.9277"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="392" x2="392" y1="67.4883" y2="340.9277"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="486" x2="486" y1="67.4883" y2="340.9277"/><path d="M25,41 L183,41 C188,41 188,54.2441 188,54.2441 C188,54.2441 188,67.4883 183,67.4883 L25,67.4883 C20,67.4883 20,54.2441 20,54.2441 C20,54.2441 20,41 25,41 " fill="#FEFECE" filter="url(#f1pgs5tge65583)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M183,41 C178,41 178,54.2441 178,54.2441 C178,67.4883 183,67.4883 183,67.4883 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="25" y="59.5352">Reconciliation_Queue</text><path d="M25,339.9277 L183,339.9277 C188,339.9277 188,353.1719 188,353.1719 C188,353.1719 188,366.416 183,366.416 L25,366.416 C20,366.416 20,353.1719 20,353.1719 C20,353.1719 20,339.9277 25,339.9277 " fill="#FEFECE" filter="url(#f1pgs5tge65583)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M183,339.9277 C178,339.9277 178,353.1719 178,353.1719 C178,366.416 183,366.416 183,366.416 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="25" y="358.4629">Reconciliation_Queue</text><rect fill="#FEFECE" filter="url(#f1pgs5tge65583)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="52" x="198" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="205" y="52.5352">Minio</text><rect fill="#FEFECE" filter="url(#f1pgs5tge65583)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="52" x="198" y="339.9277"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="38" x="205" y="360.4629">Minio</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="365" y="64.5352">Pay_DB</text><path d="M374,15 C374,5 392,5 392,5 C392,5 410,5 410,15 L410,41 C410,51 392,51 392,51 C392,51 374,51 374,41 L374,15 " fill="#FEFECE" filter="url(#f1pgs5tge65583)" style="stroke:#000000;stroke-width:1.5;"/><path d="M374,15 C374,25 392,25 392,25 C392,25 410,25 410,15 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="365" y="353.4629">Pay_DB</text><path d="M374,366.416 C374,356.416 392,356.416 392,356.416 C392,356.416 410,356.416 410,366.416 L410,392.416 C410,402.416 392,402.416 392,402.416 C392,402.416 374,402.416 374,392.416 L374,366.416 " fill="#FEFECE" filter="url(#f1pgs5tge65583)" style="stroke:#000000;stroke-width:1.5;"/><path d="M374,366.416 C374,376.416 392,376.416 392,376.416 C392,376.416 410,376.416 410,366.416 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><path d="M434,41 L538,41 C543,41 543,54.2441 543,54.2441 C543,54.2441 543,67.4883 538,67.4883 L434,67.4883 C429,67.4883 429,54.2441 429,54.2441 C429,54.2441 429,41 434,41 " fill="#FEFECE" filter="url(#f1pgs5tge65583)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M538,41 C533,41 533,54.2441 533,54.2441 C533,67.4883 538,67.4883 538,67.4883 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="434" y="59.5352">Mailer_Queue</text><path d="M434,339.9277 L538,339.9277 C543,339.9277 543,353.1719 543,353.1719 C543,353.1719 543,366.416 538,366.416 L434,366.416 C429,366.416 429,353.1719 429,353.1719 C429,353.1719 429,339.9277 434,339.9277 " fill="#FEFECE" filter="url(#f1pgs5tge65583)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M538,339.9277 C533,339.9277 533,353.1719 533,353.1719 C533,366.416 538,366.416 538,366.416 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="434" y="358.4629">Mailer_Queue</text><polygon fill="#A80036" points="214,94.7988,224,98.7988,214,102.7988,218,98.7988" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="220" y1="98.7988" y2="98.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="111" y="94.0566">Get the file</text><polygon fill="#A80036" points="115,124.1094,105,128.1094,115,132.1094,111,128.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="109" x2="225" y1="128.1094" y2="128.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="121" y="123.3672">File content</text><path d="M10,143.1094 L72,143.1094 L72,150.1094 L62,160.1094 L10,160.1094 L10,143.1094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:2.0;" width="419" x="10" y="143.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="156.6777">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="87" y="155.7441">[Acknowledgement]</text><polygon fill="#A80036" points="380,177.7305,390,181.7305,380,185.7305,384,181.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="386" y1="181.7305" y2="181.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="264" x="111" y="176.9883">Update ejv_files status to ACKNOLWDGED</text><path d="M10,203.7305 L72,203.7305 L72,210.7305 L62,220.7305 L10,220.7305 L10,203.7305 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="120.1973" style="stroke:#000000;stroke-width:2.0;" width="543" x="10" y="203.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="217.2988">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="173" x="87" y="216.3652">[Feedback Successful Payment]</text><polygon fill="#A80036" points="380,238.3516,390,242.3516,380,246.3516,384,242.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="386" y1="242.3516" y2="242.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="111" y="237.6094">Update records</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="553" y1="251.3516" y2="251.3516"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="92" x="15" y="261.9863">[Failed Payment]</text><polygon fill="#A80036" points="380,282.6172,390,286.6172,380,290.6172,384,286.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="386" y1="286.6172" y2="286.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="111" y="281.875">Update records</text><polygon fill="#A80036" points="474,311.9277,484,315.9277,474,319.9277,478,315.9277" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="104" x2="480" y1="315.9277" y2="315.9277"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="111" y="311.1855">Publish staff email for failed EJV</text><!--MD5=[e54013189a814c3d7c79ef8a1384c243]
@startuml ejv/reconciliation
queue       Reconciliation_Queue
participant Minio
database    Pay_DB
queue       Mailer_Queue


Reconciliation_Queue -> Minio: Get the file
Minio -> Reconciliation_Queue: File content
alt Acknowledgement
    Reconciliation_Queue -> Pay_DB : Update ejv_files status to ACKNOLWDGED
end

alt Feedback Successful Payment
    Reconciliation_Queue -> Pay_DB : Update records
else Failed Payment
    Reconciliation_Queue -> Pay_DB : Update records
    Reconciliation_Queue -> Mailer_Queue : Publish staff email for failed EJV

end

@enduml

PlantUML version 1.2021.14(Fri Nov 12 08:46:50 PST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CA
--></g></svg>