<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="401px" preserveAspectRatio="none" style="width:444px;height:401px;background:#FFFFFF;" version="1.1" viewBox="0 0 444 401" width="444px" zoomAndPan="magnify"><defs><filter height="300%" id="f1mect5dwv1xil" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="89" x2="89" y1="67.4883" y2="332.9727"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="324" x2="324" y1="67.4883" y2="332.9727"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="397" x2="397" y1="67.4883" y2="332.9727"/><path d="M10,41 L168,41 C173,41 173,54.2441 173,54.2441 C173,54.2441 173,67.4883 168,67.4883 L10,67.4883 C5,67.4883 5,54.2441 5,54.2441 C5,54.2441 5,41 10,41 " fill="#FEFECE" filter="url(#f1mect5dwv1xil)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M168,41 C163,41 163,54.2441 163,54.2441 C163,67.4883 168,67.4883 168,67.4883 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="10" y="59.5352">Reconciliation_Queue</text><path d="M10,331.9727 L168,331.9727 C173,331.9727 173,345.2168 173,345.2168 C173,345.2168 173,358.4609 168,358.4609 L10,358.4609 C5,358.4609 5,345.2168 5,345.2168 C5,345.2168 5,331.9727 10,331.9727 " fill="#FEFECE" filter="url(#f1mect5dwv1xil)" style="stroke:#A80036;stroke-width:2.0;"/><path d="M168,331.9727 C163,331.9727 163,345.2168 163,345.2168 C163,358.4609 168,358.4609 168,358.4609 " fill="none" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="10" y="350.5078">Reconciliation_Queue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="297" y="64.5352">Pay_DB</text><path d="M306,15 C306,5 324,5 324,5 C324,5 342,5 342,15 L342,41 C342,51 324,51 324,51 C324,51 306,51 306,41 L306,15 " fill="#FEFECE" filter="url(#f1mect5dwv1xil)" style="stroke:#000000;stroke-width:1.5;"/><path d="M306,15 C306,25 324,25 324,25 C324,25 342,25 342,15 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="297" y="345.5078">Pay_DB</text><path d="M306,358.4609 C306,348.4609 324,348.4609 324,348.4609 C324,348.4609 342,348.4609 342,358.4609 L342,384.4609 C342,394.4609 324,394.4609 324,394.4609 C324,394.4609 306,394.4609 306,384.4609 L306,358.4609 " fill="#FEFECE" filter="url(#f1mect5dwv1xil)" style="stroke:#000000;stroke-width:1.5;"/><path d="M306,358.4609 C306,368.4609 324,368.4609 324,368.4609 C324,368.4609 342,368.4609 342,358.4609 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#f1mect5dwv1xil)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="69" x="361" y="32"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="368" y="52.5352">CFS_API</text><rect fill="#FEFECE" filter="url(#f1mect5dwv1xil)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="69" x="361" y="331.9727"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="368" y="352.5078">CFS_API</text><polygon fill="#A80036" points="312,110.1094,322,114.1094,312,118.1094,316,114.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="318" y1="114.1094" y2="114.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="96" y="94.0566">Get all credits</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="100" y="109.3672">with remaining amount &gt; 0</text><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="131" y1="143.4199" y2="143.4199"/><line style="stroke:#A80036;stroke-width:1.0;" x1="131" x2="131" y1="143.4199" y2="156.4199"/><line style="stroke:#A80036;stroke-width:1.0;" x1="90" x2="131" y1="156.4199" y2="156.4199"/><polygon fill="#A80036" points="100,152.4199,90,156.4199,100,160.4199,96,156.4199" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="96" y="138.6777">If credit memo</text><polygon fill="#A80036" points="385.5,181.7305,395.5,185.7305,385.5,189.7305,389.5,185.7305" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="391.5" y1="185.7305" y2="185.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58" x="96" y="180.9883">Get /cms</text><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="131" y1="215.041" y2="215.041"/><line style="stroke:#A80036;stroke-width:1.0;" x1="131" x2="131" y1="215.041" y2="228.041"/><line style="stroke:#A80036;stroke-width:1.0;" x1="90" x2="131" y1="228.041" y2="228.041"/><polygon fill="#A80036" points="100,224.041,90,228.041,100,232.041,96,228.041" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="96" y="210.2988">If receipt</text><polygon fill="#A80036" points="385.5,253.3516,395.5,257.3516,385.5,261.3516,389.5,257.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="391.5" y1="257.3516" y2="257.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="96" y="252.6094">Get /rcpts</text><line style="stroke:#A80036;stroke-width:1.0;" x1="89" x2="131" y1="301.9727" y2="301.9727"/><line style="stroke:#A80036;stroke-width:1.0;" x1="131" x2="131" y1="301.9727" y2="314.9727"/><line style="stroke:#A80036;stroke-width:1.0;" x1="90" x2="131" y1="314.9727" y2="314.9727"/><polygon fill="#A80036" points="100,310.9727,90,314.9727,100,318.9727,96,314.9727" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="217" x="96" y="281.9199">Iterate through invoices on receipt</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="96" y="297.2305">and debit from receipt amount</text><!--MD5=[9fa98789eadfe2761a3249d7a8bff824]
@startuml pad/sync_credit
queue       Reconciliation_Queue
database    Pay_DB
participant CFS_API

Reconciliation_Queue -> Pay_DB : Get all credits \n with remaining amount > 0
Reconciliation_Queue -> Reconciliation_Queue : If credit memo
Reconciliation_Queue -> CFS_API : Get /cms
Reconciliation_Queue -> Reconciliation_Queue : If receipt
Reconciliation_Queue -> CFS_API : Get /rcpts
Reconciliation_Queue -> Reconciliation_Queue : Iterate through invoices on receipt \nand debit from receipt amount


@enduml

PlantUML version 1.2021.14(Fri Nov 12 08:46:50 PST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: CA
--></g></svg>